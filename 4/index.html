<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KoolBox - PAR Step</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #fff;
            background: #58646D;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .par-section {
            padding: 4rem 0;
        }

        .section-title {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.3rem;
            margin-bottom: 3rem;
            color: #cbd5e0;
        }

        .par-method {
            background: rgb(208, 1, 37);
            color: white;
            padding: 4rem;
            border-radius: 25px;
            text-align: center;
            margin: 3rem 0;
        }

        .par-title {
            font-size: 2.5rem;
            margin-bottom: 2rem;
        }

        .par-steps {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin: 3rem 0;
            text-align: left;
        }

        .par-step {
            background: rgba(255, 255, 255, 0.15);
            padding: 2.5rem;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }

        .par-step:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
        }

        .par-step h4 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        .par-step p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #f7fafc;
        }

        .question-input {
            width: 100%;
            max-width: 700px;
            padding: 1.5rem;
            font-size: 1.2rem;
            border: none;
            border-radius: 15px;
            margin: 2rem 0;
            text-align: center;
            background: rgba(255,255,255,0.95);
            color: #2d3748;
        }

        .question-input::placeholder {
            color: #718096;
        }

        .shuffle-btn {
            background: rgb(88, 100, 109);
            color: white;
            padding: 1.5rem 3.5rem;
            font-size: 1.3rem;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .shuffle-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            background: rgb(60 67 73);
        }

        .shuffle-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .selected-card {
            background: linear-gradient(135deg, #4a5568, #2d3748);
            color: white;
            padding: 3rem;
            border-radius: 25px;
            margin: 3rem auto;
            max-width: 800px;
            border: 1px solid rgba(255,255,255,0.1);
            display: none;
        }

        .questions-section {
            margin: 4rem 0;
        }

        .questions-title {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 2rem;
            color: #fff;
        }

        .questions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .question-card {
            background: linear-gradient(135deg, #4a5568, #2d3748);
            padding: 2rem;
            border-radius: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.1);
            color: #f7fafc;
        }

        .question-card:hover {
            transform: translateY(-5px);
            background: linear-gradient(135deg, #c53030, #e53e3e);
            border-color: rgba(255,255,255,0.3);
        }

        @keyframes cardShuffle {
            0% { transform: rotateY(0deg) scale(1); }
            50% { transform: rotateY(180deg) scale(0.8); }
            100% { transform: rotateY(0deg) scale(1); }
        }

        .card-shuffle {
            animation: cardShuffle 1.2s ease-in-out;
        }

        a.action-btn {
            text-decoration: none;
        }

        .language-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .language-toggle:hover {
            background: rgba(255,255,255,0.3);
        }

        @media (max-width: 768px) {
            .par-steps {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .section-title {
                font-size: 2.2rem;
            }
            
            .par-title {
                font-size: 1.8rem;
            }
            
            .questions-grid {
                grid-template-columns: 1fr;
            }
            
            .par-method {
                padding: 2rem;
            }
        }

        .action-btn {
            background: rgb(208, 1, 37);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            margin: 0.5rem;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            transform: translateY(-2px);
        }

        .secondary-btn {
            background: linear-gradient(135deg, #38a169, #48bb78);
        }

        .secondary-btn:hover {
            background: linear-gradient(135deg, #2f855a, #38a169);
        }
    </style>
</head>
<body>
    <!-- Language Toggle -->
    <button class="language-toggle" onclick="toggleLanguage()">ä¸­æ–‡</button>

    <!-- Main Content -->
    <main>
        <div class="container">
            <section class="par-section">
                <h1 class="section-title" id="mainTitle">The PAR Step</h1>
                <p class="section-subtitle" id="mainSubtitle">Pick. Ask. Rethink. Transform your thinking with wisdom.</p>
                
                <div class="par-method">
                    <h2 class="par-title" id="tryTitle">Try the PAR Step</h2>
                    
                    <div class="par-steps">
                        <div class="par-step">
                            <h4 id="step1Title">1. Pick</h4>
                            <p id="step1Text">Choose a card that resonates with your current challenge or question. Trust your intuition--the right card will speak to you.</p>
                        </div>
                        <div class="par-step">
                            <h4 id="step2Title">2. Ask</h4>
                            <p id="step2Text">Reflect on the card's wisdom and ask how it applies to your situation. What insights can you gain from this perspective?</p>
                        </div>
                        <div class="par-step">
                            <h4 id="step3Title">3. Rethink</h4>
                            <p id="step3Text">Use the insights to shift your perspective, solve problems, or inspire action. Let the wisdom guide your next steps.</p>
                        </div>
                    </div>
                    
                    <input type="text" class="question-input" id="userQuestion" placeholder="What's one way I can improve my leadership skills?">
                    <br>
                    <button class="shuffle-btn" onclick="shuffleCard()" id="shuffleBtn">ðŸŽ² Shuffle the Deck</button>
                    
                    <div id="selectedCard" class="selected-card">
                        <!-- Selected card will appear here -->
                    </div>
                </div>

                <!-- Top 10 Questions -->
                <div class="questions-section" id="questionsSection">
                    <h3 class="questions-title" id="questionsTitle">Top 10 Questions for PAR Step</h3>
                    <p style="text-align: center; margin-bottom: 2rem; color: #cbd5e0; font-size: 1.1rem;" id="questionsSubtitle">Click any question to use it in your PAR session</p>
                    <div class="questions-grid" id="questionsGrid">
                        <!-- Questions will be populated by JavaScript -->
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>
// Language content
const translations = {
    en: {
        mainTitle: "The PAR Step",
        mainSubtitle: "Pick. Ask. Rethink. Transform your thinking with wisdom.",
        tryTitle: "Try the PAR Step",
        step1Title: "1. Pick",
        step1Text: "Choose a card that resonates with your current challenge or question. Trust your intuition--the right card will speak to you.",
        step2Title: "2. Ask", 
        step2Text: "Reflect on the card's wisdom and ask how it applies to your situation. What insights can you gain from this perspective?",
        step3Title: "3. Rethink",
        step3Text: "Use the insights to shift your perspective, solve problems, or inspire action. Let the wisdom guide your next steps.",
        placeholder: "What's one way I can improve my leadership skills?",
        shuffleBtn: "ðŸŽ² Shuffle the Deck",
        shuffling: "ðŸŽ² Shuffling...",
        questionsTitle: "Top 10 Questions for PAR Step",
        questionsSubtitle: "Click any question to use it in your PAR session",
        askAnotherBtn: "â“ Ask Another Question",
        yourQuestion: "ðŸŽ¯ Your Question:",
        cardWisdom: "ðŸ’¡ Card Wisdom:",
        insightBooster: "ðŸ¤” Insight Booster:",
        sampleQuestions: [
            { icon: "ðŸ“š", title: "Academic Excellence", text: "How can I improve my grades this semester?" },
            { icon: "ðŸ¤", title: "Social Connection", text: "What's the best way to make new friends?" },
            { icon: "ðŸ’¼", title: "Business Growth", text: "How can we increase profits for our company this year?" },
            { icon: "â°", title: "Time Management", text: "What steps can I take to improve my time management skills?" },
            { icon: "ðŸ‘‘", title: "Leadership", text: "How can I become a better leader in my team or community?" },
            { icon: "ðŸ’ª", title: "Health & Wellness", text: "What's one small habit I can change to improve my health?" },
            { icon: "ðŸ’¬", title: "Communication", text: "How can I communicate more effectively with my coworkers?" },
            { icon: "ðŸ’¡", title: "Creative Problem-Solving", text: "What's a creative way to solve my current work challenge?" },
            { icon: "ðŸ”¥", title: "Motivation", text: "How can I stay motivated when I encounter setbacks?" },
            { icon: "ðŸŽ¯", title: "Personal Development", text: "What's one area of my life I should focus on improving next?" }
        ]
    },
    zh: {
        mainTitle: "PAR æ­¥é©Ÿ",
        mainSubtitle: "æ€é¸ã€‚æŽ¢å•ã€‚é‡æ€ã€‚ç”¨æ™ºæ…§è½‰åŒ–ä½ çš„æ€ç¶­ã€‚",
        tryTitle: "è©¦è©¦ PAR æ­¥é©Ÿ",
        step1Title: "1. æ€é¸",
        step1Text: "é¸æ“‡ä¸€å¼µèˆ‡ä½ ç•¶å‰æŒ‘æˆ°æˆ–å•é¡Œç”¢ç”Ÿå…±é³´çš„å¡ç‰‡ã€‚ç›¸ä¿¡ä½ çš„ç›´è¦ºâ€”â€”åˆé©çš„å¡ç‰‡æœƒèˆ‡ä½ å°è©±ã€‚",
        step2Title: "2. æŽ¢å•",
        step2Text: "åæ€å¡ç‰‡çš„æ™ºæ…§ï¼Œå•å•å®ƒå¦‚ä½•æ‡‰ç”¨æ–¼ä½ çš„æƒ…æ³ã€‚ä½ èƒ½å¾žé€™å€‹è§’åº¦ç²å¾—ä»€éº¼æ´žå¯Ÿï¼Ÿ",
        step3Title: "3. é‡æ€",
        step3Text: "é‹ç”¨é€™äº›æ´žå¯Ÿä¾†è½‰æ›ä½ çš„è¦–è§’ã€è§£æ±ºå•é¡Œæˆ–æ¿€ç™¼è¡Œå‹•ã€‚è®“æ™ºæ…§å¼•å°Žä½ çš„ä¸‹ä¸€æ­¥ã€‚",
        placeholder: "æˆ‘å¦‚ä½•æå‡é ˜å°ŽæŠ€å·§ï¼Ÿ",
        shuffleBtn: "ðŸŽ² æ´—ç‰Œ",
        shuffling: "ðŸŽ² æ´—ç‰Œä¸­...",
        questionsTitle: "PAR æ­¥é©Ÿåå¤§å•é¡Œ",
        questionsSubtitle: "é»žæ“Šä»»ä½•å•é¡Œåœ¨ä½ çš„ PAR ç’°ç¯€ä¸­ä½¿ç”¨",
        askAnotherBtn: "â“ å•å¦ä¸€å€‹å•é¡Œ",
        yourQuestion: "ðŸŽ¯ ä½ çš„å•é¡Œï¼š",
        cardWisdom: "ðŸ’¡ å¡ç‰‡æ™ºæ…§ï¼š",
        insightBooster: "ðŸ¤” æ´žå¯ŸåŠ©æŽ¨å™¨ï¼š",
        sampleQuestions: [
            { icon: "ðŸ“š", title: "å­¸æ¥­å“è¶Š", text: "æˆ‘å¦‚ä½•åœ¨é€™å­¸æœŸæå‡æˆç¸¾ï¼Ÿ" },
            { icon: "ðŸ¤", title: "ç¤¾äº¤é€£çµ", text: "çµäº¤æ–°æœ‹å‹çš„æœ€ä½³æ–¹æ³•æ˜¯ä»€éº¼ï¼Ÿ" },
            { icon: "ðŸ’¼", title: "æ¥­å‹™å¢žé•·", text: "æˆ‘å€‘ä»Šå¹´å¦‚ä½•å¢žåŠ å…¬å¸åˆ©æ½¤ï¼Ÿ" },
            { icon: "â°", title: "æ™‚é–“ç®¡ç†", text: "æˆ‘å¯ä»¥æŽ¡å–ä»€éº¼æ­¥é©Ÿä¾†æ”¹å–„æ™‚é–“ç®¡ç†æŠ€å·§ï¼Ÿ" },
            { icon: "ðŸ‘‘", title: "é ˜å°ŽåŠ›", text: "æˆ‘å¦‚ä½•åœ¨åœ˜éšŠæˆ–ç¤¾å€ä¸­æˆç‚ºæ›´å¥½çš„é ˜å°Žè€…ï¼Ÿ" },
            { icon: "ðŸ’ª", title: "å¥åº·èˆ‡ä¿å¥", text: "æˆ‘å¯ä»¥æ”¹è®Šä»€éº¼å°ç¿’æ…£ä¾†æ”¹å–„å¥åº·ï¼Ÿ" },
            { icon: "ðŸ’¬", title: "æºé€š", text: "æˆ‘å¦‚ä½•èˆ‡åŒäº‹æ›´æœ‰æ•ˆåœ°æºé€šï¼Ÿ" },
            { icon: "ðŸ’¡", title: "å‰µæ„è§£é›£", text: "è§£æ±ºç•¶å‰å·¥ä½œæŒ‘æˆ°çš„å‰µæ„æ–¹æ³•æ˜¯ä»€éº¼ï¼Ÿ" },
            { icon: "ðŸ”¥", title: "å‹•æ©Ÿ", text: "é‡åˆ°æŒ«æŠ˜æ™‚æˆ‘å¦‚ä½•ä¿æŒå‹•åŠ›ï¼Ÿ" },
            { icon: "ðŸŽ¯", title: "å€‹äººç™¼å±•", text: "æˆ‘ç”Ÿæ´»ä¸­æ‡‰è©²å°ˆæ³¨æ”¹å–„çš„ä¸‹ä¸€å€‹é ˜åŸŸæ˜¯ä»€éº¼ï¼Ÿ" }
        ]
    }
};

// Card data in both languages
const cardData = {
    en: {
        philosophy: [
            { name: "First Step", quote: "Every journey begins with a single step", rhyme: "Leap. Keep. Reap.", content: "Lace up your boots and take that first leap toward growth. Whether it's a new project or personal goal, progress starts now. Embrace the adventure and plant the seeds of success!" },
            { name: "Be Water", quote: "Flexibility is the ultimate strength", rhyme: "Flow. Grow. Glow.", content: "Inspired by Bruce Lee's wisdom, the idea is to adapt like water--shaping yourself to challenges. Flow through obstacles, nourish your creativity, and let resilience carry you forward." },
            { name: "NOW", quote: "The power lies in the present moment", rhyme: "Here. Clear. Steer.", content: "The past is gone, and the future is unknown. Embrace the present moment and measure where you are now. Your power lies in the here and now--seize the day!" }
        ],
        management: [
            { name: "Habit Contract", quote: "Transform routines with commitment", rhyme: "Plan. Span. Ban.", content: "Smooth out the rough edges of your daily routines. Transform unproductive habits into polished, productive behaviors through commitment and focus. Consistency is the key to turning small changes into big results." }
        ],
        culture: [
            { name: "Never Stop Creating", quote: "Let your imagination flow freely", rhyme: "Dream. Stream. Beam.", content: "Creativity has no limits. A sponge absorbs inspiration from everywhere, reminding you to keep creating and finding joy in the process. It's not about competition but about letting your imagination flow freely." }
        ],
        innovation: [
            { name: "25 Bullets Writing", quote: "Organize thoughts and create clarity", rhyme: "Write. Sight. Bright.", content: "Aim before you write. A set of 25 colorful pencils organizes thoughts and ideas, creating something vibrant and impactful. Intentional writing leads to clarity and creativity." }
        ]
    },
    zh: {
        philosophy: [
            { name: "ç¬¬ä¸€æ­¥", quote: "åƒé‡Œä¹‹è¡Œï¼Œå§‹æ–¼è¶³ä¸‹", rhyme: "èºã€‚å®ˆã€‚æ”¶ã€‚", content: "ç¶å¥½éž‹å¸¶ï¼Œæœæˆé•·é‚å‡ºç¬¬ä¸€æ­¥ã€‚ç„¡è«–æ˜¯æ–°é …ç›®é‚„æ˜¯å€‹äººç›®æ¨™ï¼Œé€²æ­¥å¾žç¾åœ¨é–‹å§‹ã€‚æ“æŠ±å†’éšªï¼Œæ’­ä¸‹æˆåŠŸçš„ç¨®å­ï¼" },
            { name: "å¦‚æ°´", quote: "éˆæ´»æ€§æ˜¯çµ‚æ¥µåŠ›é‡", rhyme: "æµã€‚é•·ã€‚å…‰ã€‚", content: "å—æŽå°é¾æ™ºæ…§å•Ÿç™¼ï¼Œè¦åƒæ°´ä¸€æ¨£é©æ‡‰â€”â€”è®“è‡ªå·±é©æ‡‰æŒ‘æˆ°ã€‚æµéŽéšœç¤™ï¼Œæ»‹é¤Šå‰µé€ åŠ›ï¼Œè®“éŸŒæ€§å¸¶ä½ å‘å‰ã€‚" },
            { name: "ç•¶ä¸‹", quote: "åŠ›é‡åœ¨æ–¼ç•¶ä¸‹", rhyme: "é€™ã€‚æ¸…ã€‚å°Žã€‚", content: "éŽåŽ»å·²é€ï¼Œæœªä¾†æœªåœã€‚æ“æŠ±ç•¶ä¸‹æ™‚åˆ»ï¼Œè¡¡é‡ä½ ç¾åœ¨çš„ä½ç½®ã€‚ä½ çš„åŠ›é‡åœ¨æ–¼æ­¤æ™‚æ­¤åœ°â€”â€”æŠŠæ¡ä»Šå¤©ï¼" }
        ],
        management: [
            { name: "ç¿’æ…£å¥‘ç´„", quote: "ä»¥æ‰¿è«¾æ”¹è®Šä¾‹è¡Œå…¬äº‹", rhyme: "è¨ˆã€‚å±•ã€‚ç¦ã€‚", content: "ç£¨å¹³æ—¥å¸¸ä¾‹è¡Œå…¬äº‹çš„ç²—ç³™é‚Šç·£ã€‚é€šéŽæ‰¿è«¾å’Œå°ˆæ³¨ï¼Œå°‡ç„¡æ•ˆç¿’æ…£è½‰åŒ–ç‚ºç²¾è‰¯ã€å¯Œæœ‰æˆæ•ˆçš„è¡Œç‚ºã€‚ä¸€è‡´æ€§æ˜¯å°‡å°æ”¹è®Šè½‰åŒ–ç‚ºå¤§æˆæžœçš„é—œéµã€‚" }
        ],
        culture: [
            { name: "æ°¸ä¸åœæ­¢å‰µé€ ", quote: "è®“æƒ³åƒåŠ›è‡ªç”±æµæ·Œ", rhyme: "å¤¢ã€‚æµã€‚æŸã€‚", content: "å‰µé€ åŠ›ç„¡é™ã€‚æµ·ç¶¿å¾žå„è™•å¸æ”¶éˆæ„Ÿï¼Œæé†’ä½ ä¸æ–·å‰µé€ ä¸¦åœ¨éŽç¨‹ä¸­æ‰¾åˆ°å¿«æ¨‚ã€‚é€™ä¸æ˜¯ç«¶çˆ­ï¼Œè€Œæ˜¯è®“æƒ³åƒåŠ›è‡ªç”±æµæ·Œã€‚" }
        ],
        innovation: [
            { name: "25 é»žå¯«ä½œ", quote: "æ•´ç†æ€è·¯ï¼Œå‰µé€ æ¸…æ™°", rhyme: "å¯«ã€‚è¦–ã€‚äº®ã€‚", content: "å¯«ä½œå‰å…ˆçž„æº–ã€‚25 æ”¯å½©è‰²é‰›ç­†æ•´ç†æ€æƒ³å’Œæƒ³æ³•ï¼Œå‰µé€ ç”Ÿå‹•æœ‰åŠ›çš„æ±è¥¿ã€‚æœ‰æ„åœ–çš„å¯«ä½œå¸¶ä¾†æ¸…æ™°å’Œå‰µé€ åŠ›ã€‚" }
        ]
    }
};

// Reflection prompts in both languages
const reflectionPrompts = {
    en: {
        philosophy: [
            "What's one thing in your life that deserves more focus right now?",
            "How can you apply this wisdom to your current situation?",
            "What small step can you take today to embrace this insight?"
        ],
        management: [
            "How can this principle improve your productivity?",
            "What's one area of your work that could benefit from this approach?",
            "What action will you take to implement this strategy?"
        ],
        culture: [
            "How can this idea strengthen your relationships?",
            "What's one way you can share this wisdom with others?",
            "How does this connect to your personal values?"
        ],
        innovation: [
            "What creative solution could this inspire?",
            "How can you apply this to solve a current challenge?",
            "What new possibility does this open up for you?"
        ]
    },
    zh: {
        philosophy: [
            "ä½ ç”Ÿæ´»ä¸­ç¾åœ¨æœ‰ä»€éº¼å€¼å¾—æ›´å¤šé—œæ³¨ï¼Ÿ",
            "ä½ å¦‚ä½•å°‡é€™æ™ºæ…§æ‡‰ç”¨æ–¼ç•¶å‰æƒ…æ³ï¼Ÿ",
            "ä»Šå¤©ä½ å¯ä»¥æŽ¡å–ä»€éº¼å°æ­¥é©Ÿä¾†æ“æŠ±é€™æ´žå¯Ÿï¼Ÿ"
        ],
        management: [
            "é€™åŽŸå‰‡å¦‚ä½•æå‡ä½ çš„ç”Ÿç”¢åŠ›ï¼Ÿ",
            "ä½ å·¥ä½œä¸­å“ªå€‹é ˜åŸŸå¯ä»¥å¾žé€™æ–¹æ³•ä¸­å—ç›Šï¼Ÿ",
            "ä½ æœƒæŽ¡å–ä»€éº¼è¡Œå‹•ä¾†å¯¦æ–½é€™ç­–ç•¥ï¼Ÿ"
        ],
        culture: [
            "é€™æƒ³æ³•å¦‚ä½•åŠ å¼·ä½ çš„é—œä¿‚ï¼Ÿ",
            "ä½ å¯ä»¥ç”¨ä»€éº¼æ–¹å¼èˆ‡ä»–äººåˆ†äº«é€™æ™ºæ…§ï¼Ÿ",
            "é€™å¦‚ä½•èˆ‡ä½ çš„å€‹äººåƒ¹å€¼è§€è¯ç¹«ï¼Ÿ"
        ],
        innovation: [
            "é€™å¯ä»¥æ¿€ç™¼ä»€éº¼å‰µæ„è§£æ±ºæ–¹æ¡ˆï¼Ÿ",
            "ä½ å¦‚ä½•æ‡‰ç”¨é€™å€‹ä¾†è§£æ±ºç•¶å‰æŒ‘æˆ°ï¼Ÿ",
            "é€™ç‚ºä½ é–‹å•Ÿäº†ä»€éº¼æ–°å¯èƒ½æ€§ï¼Ÿ"
        ]
    }
};

// Current language
let currentLang = 'en';

// Enhanced language detection
function detectLanguage() {
    const fullUrl = window.location.href.toLowerCase();
    const pathname = window.location.pathname.toLowerCase();
    const urlParams = new URLSearchParams(window.location.search);
    const urlLang = urlParams.get('lang');
    
    console.log('Detecting language...');
    console.log('Full URL:', fullUrl);
    console.log('Pathname:', pathname);
    console.log('URL Lang param:', urlLang);
    
    // Check URL parameter first
    if (urlLang === 'zh' || urlLang === 'zh-hk') {
        currentLang = 'zh';
        console.log('Language set to Chinese via URL parameter');
    }
    // Check if URL contains zh/ patterns
    else if (fullUrl.includes('/zh/') || 
             fullUrl.includes('zh/') || 
             pathname.includes('/zh/') || 
             pathname.includes('/zh') ||
             pathname.startsWith('zh/') ||
             pathname.startsWith('/zh/')) {
        currentLang = 'zh';
        console.log('Language set to Chinese via URL path detection');
    }
    // Check for other Chinese indicators
    else if (fullUrl.includes('chinese') || 
             fullUrl.includes('hk') || 
             pathname.includes('chinese')) {
        currentLang = 'zh';
        console.log('Language set to Chinese via keyword detection');
    }
    else {
        currentLang = 'en';
        console.log('Language set to English (default)');
    }
    
    console.log('Final language:', currentLang);
    updateContent();
}

// Toggle language
function toggleLanguage() {
    currentLang = currentLang === 'en' ? 'zh' : 'en';
    console.log('Language toggled to:', currentLang);
    updateContent();
}

// Update all content based on current language
function updateContent() {
    const t = translations[currentLang];
    
    // Update UI text
    document.getElementById('mainTitle').textContent = t.mainTitle;
    document.getElementById('mainSubtitle').textContent = t.mainSubtitle;
    document.getElementById('tryTitle').textContent = t.tryTitle;
    document.getElementById('step1Title').textContent = t.step1Title;
    document.getElementById('step1Text').textContent = t.step1Text;
    document.getElementById('step2Title').textContent = t.step2Title;
    document.getElementById('step2Text').textContent = t.step2Text;
    document.getElementById('step3Title').textContent = t.step3Title;
    document.getElementById('step3Text').textContent = t.step3Text;
    document.getElementById('userQuestion').placeholder = t.placeholder;
    document.getElementById('shuffleBtn').textContent = t.shuffleBtn;
    document.getElementById('questionsTitle').textContent = t.questionsTitle;
    document.getElementById('questionsSubtitle').textContent = t.questionsSubtitle;
    
    // Update language toggle button
    document.querySelector('.language-toggle').textContent = currentLang === 'en' ? 'ä¸­æ–‡' : 'English';
    
    // Update questions grid
    updateQuestionsGrid();
    
    console.log('Content updated for language:', currentLang);
}

// Update questions grid
function updateQuestionsGrid() {
    const questionsGrid = document.getElementById('questionsGrid');
    const questions = translations[currentLang].sampleQuestions;
    
    questionsGrid.innerHTML = questions.map(q => `
        <div class="question-card" onclick="fillQuestion('${q.text}')">
            <strong>${q.icon} ${q.title}</strong><br>
            ${q.text}
        </div>
    `).join('');
}

// Fill question into input field
function fillQuestion(question) {
    document.getElementById('userQuestion').value = question;
    document.getElementById('userQuestion').scrollIntoView({ behavior: 'smooth', block: 'center' });
    setTimeout(() => {
        document.getElementById('userQuestion').focus();
    }, 500);
}

// Shuffle card function
function shuffleCard() {
    const selectedCardDiv = document.getElementById('selectedCard');
    const shuffleBtn = document.querySelector('.shuffle-btn');
    const question = document.getElementById('userQuestion').value;
    const t = translations[currentLang];
    
    // Animation and loading state
    selectedCardDiv.classList.add('card-shuffle');
    shuffleBtn.textContent = t.shuffling;
    shuffleBtn.disabled = true;
    
    setTimeout(() => {
        // Get all cards for current language
        const cards = cardData[currentLang];
        const allCards = [
            ...cards.philosophy.map(card => ({...card, category: 'philosophy'})),
            ...cards.management.map(card => ({...card, category: 'management'})),
            ...cards.culture.map(card => ({...card, category: 'culture'})),
            ...cards.innovation.map(card => ({...card, category: 'innovation'}))
        ];
        
        // Select random card
        const randomCard = allCards[Math.floor(Math.random() * allCards.length)];
        const prompts = reflectionPrompts[currentLang][randomCard.category];
        
        selectedCardDiv.innerHTML = `
            <div style="text-align: center; margin-bottom: 2rem;">
                <h3 style="color: #fff; margin-bottom: 1rem; font-size: 2rem;">${randomCard.name}</h3>
                <p style="font-style: italic; font-size: 1.3rem; margin-bottom: 1rem; color: #cbd5e0;">"${randomCard.quote}"</p>
                <div style="margin-bottom: 1.5rem;">
                    <span style="background: ${getThemeColor(randomCard.category)}; color: white; padding: 0.75rem 1.5rem; border-radius: 25px; font-size: 1rem; margin-right: 1rem; text-transform: capitalize;">${randomCard.category}</span>
                    <span style="color: #e2e8f0; font-weight: 600; font-size: 1.1rem;">${randomCard.rhyme}</span>
                </div>
            </div>
            
            ${question ? `<div style="margin: 2rem 0; padding: 2rem; background: rgba(255,255,255,0.1); border-radius: 20px; border-left: 5px solid ${getThemeColor(randomCard.category)};">
                <h4 style="color: #fff; margin-bottom: 1rem; font-size: 1.2rem;">${t.yourQuestion}</h4>
                <p style="color: #e2e8f0; font-style: italic; font-size: 1.1rem;">${question}</p>
            </div>` : ''}
            
            <div style="margin: 2rem 0; padding: 2rem; background: rgba(255,255,255,0.1); border-radius: 20px;">
                <h4 style="margin-bottom: 1rem; color: #fff; font-size: 1.2rem;">${t.cardWisdom}</h4>
                <p style="color: #e2e8f0; line-height: 1.8; font-size: 1.1rem;">${randomCard.content}</p>
            </div>
            
            <div style="margin: 2rem 0;">
                <h4 style="margin-bottom: 1.5rem; color: #fff; font-size: 1.2rem;">${t.insightBooster}</h4>
                ${prompts.map((prompt, index) => `
                    <div style="margin-bottom: 1rem; padding: 1rem; border-left: 4px solid ${getThemeColor(randomCard.category)}; background: rgba(255,255,255,0.05); border-radius: 0 10px 10px 0;">
                        <span style="color: ${getThemeColor(randomCard.category)}; font-weight: bold;">${index + 1}.</span>
                        <span style="color: #e2e8f0; margin-left: 0.5rem; font-size: 1.1rem;">${prompt}</span>
                    </div>
                `).join('')}
            </div>
            
            <div style="margin-top: 3rem; text-align: center;">
                <button onclick="window.location.reload()" class="secondary-btn action-btn">${t.askAnotherBtn}</button>
            </div>
        `;
        
        selectedCardDiv.style.display = 'block';
        selectedCardDiv.classList.remove('card-shuffle');
        shuffleBtn.textContent = t.shuffleBtn;
        shuffleBtn.disabled = false;
        
        // Hide the questions section after shuffling
        document.getElementById('questionsSection').style.display = 'none';
        
        // Scroll to show the result
        selectedCardDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }, 1200);
}

// Utility function to get theme colors
function getThemeColor(category) {
    const colors = {
        philosophy: '#2b6cb0',  // Blue
        management: '#d69e2e',  // Orange
        culture: '#e53e3e',     // Red
        innovation: '#38a169'   // Green
    };
    return colors[category] || '#667eea';
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    detectLanguage();
});
</script>
</body>
</html>
